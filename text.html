<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Graffiti Wall</title>
    <style>
        body { font-family: sans-serif; background: #222; color: #0f0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        #sharedText { width: 80%; height: 50vh; background: #000; border: 2px solid #0f0; color: #fff; font-size: 1.2rem; padding: 15px; box-shadow: 0 0 20px rgba(0,255,0,0.2); resize: none; outline: none; }
        .controls { margin-top: 20px; display: flex; gap: 15px; }
        button { padding: 10px 25px; font-weight: bold; cursor: pointer; border: 2px solid #0f0; background: #000; color: #0f0; }
        button:hover { background: #0f0; color: #000; }
        .flash { animation: flashEffect 0.5s; }
        @keyframes flashEffect { 0% { border-color: #fff; } 100% { border-color: #0f0; } }
    </style>
</head>
<body>
    <h1>GLOBAL SHARED TEXT</h1>
    <textarea id="sharedText" placeholder="Loading global chaos..."></textarea>
    <div class="controls">
        <button id="reloadBtn">üîÑ Force Reload</button>
        <button id="uploadBtn">‚¨ÜÔ∏è UPLOAD CHANGES</button>
        <button id="nukeBtn" style="border-color: red; color: red;">‚ùå NUKE IT</button>
    </div>

    <script type="module">
        // Using Firebase CDN (No external files needed on your PC)
        import { initializeApp } from "https://www.gstatic.com";
        import { getDatabase, ref, set, onValue, get } from "https://www.gstatic.com";

        // REPLACE THIS with your specific Firebase Config from the console
        const firebaseConfig = {
          apiKey: "AIzaSyAcNT6uHpzia23O72_zyiSUV8Yv2tbx2ko",
          authDomain: "text-textfile.firebaseapp.com",
          projectId: "text-textfile",
          storageBucket: "text-textfile.firebasestorage.app",
          messagingSenderId: "44439473557",
          appId: "1:44439473557:web:73bdd816629adc909e7a9c",
          measurementId: "G-J2XNT457NV"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const textRef = ref(db, 'global_graffiti');
        const textArea = document.getElementById('sharedText');

        // Live Listener: Automatically updates when ANYONE saves
        onValue(textRef, (snapshot) => {
            const data = snapshot.val();
            if (data !== textArea.value) {
                textArea.value = data || "";
                textArea.classList.add('flash');
                setTimeout(() => textArea.classList.remove('flash'), 500);
            }
        });

        // Upload Button
        document.getElementById('uploadBtn').addEventListener('click', () => {
            set(textRef, textArea.value).then(() => alert("Sent to cloud!"));
        });

        // Manual Reload
        document.getElementById('reloadBtn').addEventListener('click', () => {
            get(textRef).then((snapshot) => { textArea.value = snapshot.val() || ""; });
        });

        // Nuke Button
        document.getElementById('nukeBtn').addEventListener('click', () => {
            if(confirm("Delete for EVERYONE?")) { set(textRef, ""); }
        });
    </script>
</body>
</html>
